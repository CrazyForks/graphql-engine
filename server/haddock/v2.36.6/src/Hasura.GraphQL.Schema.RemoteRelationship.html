<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hasura.GraphQL.Schema.RemoteRelationship</span><span>
</span><span id="line-2"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipField"><span class="hs-identifier">remoteRelationshipField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-4"></span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.4.5/lens-5.2.2-c288f4ab3533e91c5d241152121e172474cc553aa524e32488a24b727cc130b5/share/doc/html/src/Control.Lens.html"><span class="hs-identifier">Control.Lens</span></a></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.HashMap.Strict.Extended.html"><span class="hs-identifier">Data.HashMap.Strict.Extended</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashMap</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html"><span class="hs-identifier">Data.Text.Casing</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Backend</span></a></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Common</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Instances.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Instances</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier">FieldParser</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier">MonadMemoize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Remote</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Table.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Table</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Name.html"><span class="hs-identifier">Hasura.Name</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Name</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.html"><span class="hs-identifier">Hasura.RQL.IR</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier">FieldName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#RelType"><span class="hs-identifier">RelType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier">relNameToTxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html"><span class="hs-identifier">Hasura.RQL.Types.Relationships.Remote</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.ResultCustomization</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Roles.html"><span class="hs-identifier">Hasura.RQL.Types.Roles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Roles.html#adminRoleName"><span class="hs-identifier">adminRoleName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html"><span class="hs-identifier">Hasura.RQL.Types.Schema.Options</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#askTableInfo"><span class="hs-identifier">askTableInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html"><span class="hs-identifier">Hasura.RQL.Types.Source</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.SourceCustomization</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.html"><span class="hs-identifier">Hasura.RemoteSchema.Metadata</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.html"><span class="hs-identifier">Hasura.RemoteSchema.SchemaCache</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.html"><span class="hs-identifier">Hasura.RemoteSchema.SchemaCache</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Remote</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.SQL.AnyBackend.html"><span class="hs-identifier">Hasura.SQL.AnyBackend</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="annot"><span class="hs-comment">-- | Remote relationship field parsers</span></span><span>
</span><span id="line-37"></span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipField"><span class="hs-identifier hs-type">remoteRelationshipField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceCache"><span class="hs-identifier hs-type">SourceCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#RemoteSchemaMap"><span class="hs-identifier hs-type">RemoteSchemaMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#RemoteSchemaPermissions"><span class="hs-identifier hs-type">RemoteSchemaPermissions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RemoteSourceRelationshipBuilder"><span class="hs-identifier hs-type">RemoteSourceRelationshipBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-type">RemoteRelationshipParserBuilder</span></a></span><span>
</span><span id="line-45"></span><span id="remoteRelationshipField"><span class="annot"><span class="annottext">remoteRelationshipField :: SchemaContext
-&gt; SchemaOptions
-&gt; SourceCache
-&gt; RemoteSchemaMap
-&gt; RemoteSchemaPermissions
-&gt; RemoteSourceRelationshipBuilder
-&gt; RemoteRelationshipParserBuilder
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipField"><span class="hs-identifier hs-var hs-var">remoteRelationshipField</span></a></span></span><span> </span><span id="local-6989586621687993747"><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687993747"><span class="hs-identifier hs-var">schemaContext</span></a></span></span><span> </span><span id="local-6989586621687993748"><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687993748"><span class="hs-identifier hs-var">schemaOptions</span></a></span></span><span> </span><span id="local-6989586621687993749"><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687993749"><span class="hs-identifier hs-var">sourceCache</span></a></span></span><span> </span><span id="local-6989586621687993750"><span class="annot"><span class="annottext">RemoteSchemaMap
</span><a href="#local-6989586621687993750"><span class="hs-identifier hs-var">remoteSchemaCache</span></a></span></span><span> </span><span id="local-6989586621687993751"><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687993751"><span class="hs-identifier hs-var">remoteSchemaPermissions</span></a></span></span><span> </span><span id="local-6989586621687993752"><span class="annot"><span class="annottext">RemoteSourceRelationshipBuilder
</span><a href="#local-6989586621687993752"><span class="hs-identifier hs-var">remoteSourceRelationshipBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall lhsJoinField r (n :: * -&gt; *) (m :: * -&gt; *).
 MonadBuildSchemaBase m n =&gt;
 RemoteFieldInfo lhsJoinField
 -&gt; SchemaT
      r
      m
      (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]))
-&gt; RemoteRelationshipParserBuilder
</span><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-var">RemoteRelationshipParserBuilder</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RemoteFieldInfo"><span class="hs-identifier hs-type">RemoteFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687993854"><span id="local-6989586621687993855"><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
RemoteFieldInfoRHS
_rfiLHS :: HashMap FieldName lhsJoinField
_rfiRHS :: RemoteFieldInfoRHS
_rfiLHS :: forall lhsJoinField.
RemoteFieldInfo lhsJoinField -&gt; HashMap FieldName lhsJoinField
_rfiRHS :: forall lhsJoinField.
RemoteFieldInfo lhsJoinField -&gt; RemoteFieldInfoRHS
</span><a href="#local-6989586621687993854"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; SchemaT
     r
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; SchemaT r m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfoRHS
</span><a href="#local-6989586621687993855"><span class="hs-identifier hs-var">_rfiRHS</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-48"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RFISource"><span class="hs-identifier hs-type">RFISource</span></a></span><span> </span><span id="local-6989586621687993860"><span class="annot"><span class="annottext">AnyBackend RemoteSourceFieldInfo
</span><a href="#local-6989586621687993860"><span class="hs-identifier hs-var">anyRemoteSourceFieldInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-49"></span><span>        </span><span class="hs-comment">-- see Note [SchemaT and stacking]</span><span>
</span><span id="line-50"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSourceRelationshipBuilder
</span><a href="#local-6989586621687993752"><span class="hs-identifier hs-var">remoteSourceRelationshipBuilder</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-51"></span><span>          </span><span class="annot"><span class="annottext">RemoteSourceRelationshipBuilder
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#IncludeRemoteSourceRelationship"><span class="hs-identifier hs-var">IncludeRemoteSourceRelationship</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (c1 :: BackendType -&gt; Constraint)
       (c2 :: BackendType -&gt; Constraint) (i :: BackendType -&gt; *) r.
(AllBackendsSatisfy c1, AllBackendsSatisfy c2) =&gt;
AnyBackend i
-&gt; (forall (b :: BackendType). (c1 b, c2 b) =&gt; i b -&gt; r) -&gt; r
</span><a href="Hasura.SQL.AnyBackend.html#dispatchAnyBackendWithTwoConstraints"><span class="hs-identifier hs-var">dispatchAnyBackendWithTwoConstraints</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendSchema"><span class="hs-identifier hs-type">BackendSchema</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span>
</span><span id="line-52"></span><span>            </span><span class="annot"><span class="annottext">AnyBackend RemoteSourceFieldInfo
</span><a href="#local-6989586621687993860"><span class="hs-identifier hs-var">anyRemoteSourceFieldInfo</span></a></span><span>
</span><span id="line-53"></span><span>            </span><span class="hs-glyph">\</span><span id="local-6989586621687993880"><span class="annot"><span class="annottext">RemoteSourceFieldInfo b
</span><a href="#local-6989586621687993880"><span class="hs-identifier hs-var">remoteSourceFieldInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-54"></span><span>              </span><span id="local-6989586621687993881"><span class="annot"><span class="annottext">[FieldParser
   n
   (RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue b)]
</span><a href="#local-6989586621687993881"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SchemaContext
-&gt; SchemaOptions
-&gt; SourceCache
-&gt; RemoteSourceFieldInfo b
-&gt; m [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue b)]
forall (m :: * -&gt; *) (n :: * -&gt; *) (tgt :: BackendType).
(MonadError QErr m, MonadMemoize m, MonadParse n,
 BackendSchema tgt, BackendTableSelectSchema tgt) =&gt;
SchemaContext
-&gt; SchemaOptions
-&gt; SourceCache
-&gt; RemoteSourceFieldInfo tgt
-&gt; m [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSourceField"><span class="hs-identifier hs-var">remoteRelationshipToSourceField</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687993747"><span class="hs-identifier hs-var">schemaContext</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687993748"><span class="hs-identifier hs-var">schemaOptions</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687993749"><span class="hs-identifier hs-var">sourceCache</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSourceFieldInfo b
</span><a href="#local-6989586621687993880"><span class="hs-identifier hs-var">remoteSourceFieldInfo</span></a></span><span>
</span><span id="line-55"></span><span>              </span><span class="annot"><span class="annottext">Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
 -&gt; m (Maybe
         [FieldParser n (RemoteRelationshipField UnpreparedValue)]))
-&gt; Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">([FieldParser n (RemoteRelationshipField UnpreparedValue)]
 -&gt; Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(RemoteSourceSelect
   (RemoteRelationshipField UnpreparedValue) UnpreparedValue b
 -&gt; RemoteRelationshipField UnpreparedValue)
-&gt; FieldParser
     n
     (RemoteSourceSelect
        (RemoteRelationshipField UnpreparedValue) UnpreparedValue b)
-&gt; FieldParser n (RemoteRelationshipField UnpreparedValue)
forall a b.
(a -&gt; b)
-&gt; FieldParser MetadataObjId n a -&gt; FieldParser MetadataObjId n b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnyBackend
  (RemoteSourceSelect
     (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; RemoteRelationshipField UnpreparedValue
forall (vf :: BackendType -&gt; *).
AnyBackend (RemoteSourceSelect (RemoteRelationshipField vf) vf)
-&gt; RemoteRelationshipField vf
</span><a href="Hasura.RQL.IR.Root.html#RemoteSourceField"><span class="hs-identifier hs-var">IR.RemoteSourceField</span></a></span><span> </span><span class="annot"><span class="annottext">(AnyBackend
   (RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
 -&gt; RemoteRelationshipField UnpreparedValue)
-&gt; (RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue b
    -&gt; AnyBackend
         (RemoteSourceSelect
            (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
-&gt; RemoteSourceSelect
     (RemoteRelationshipField UnpreparedValue) UnpreparedValue b
-&gt; RemoteRelationshipField UnpreparedValue
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RemoteSourceSelect
  (RemoteRelationshipField UnpreparedValue) UnpreparedValue b
-&gt; AnyBackend
     (RemoteSourceSelect
        (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
forall (b :: BackendType) (i :: BackendType -&gt; *).
HasTag b =&gt;
i b -&gt; AnyBackend i
</span><a href="Hasura.SQL.AnyBackend.html#mkAnyBackend"><span class="hs-identifier hs-var">mkAnyBackend</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldParser
   n
   (RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue b)
 -&gt; FieldParser n (RemoteRelationshipField UnpreparedValue))
-&gt; [FieldParser
      n
      (RemoteSourceSelect
         (RemoteRelationshipField UnpreparedValue) UnpreparedValue b)]
-&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[FieldParser
   n
   (RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue b)]
</span><a href="#local-6989586621687993881"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-56"></span><span>          </span><span class="annot"><span class="annottext">RemoteSourceRelationshipBuilder
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#ExcludeRemoteSourceRelationship"><span class="hs-identifier hs-var">ExcludeRemoteSourceRelationship</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-57"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RFISchema"><span class="hs-identifier hs-type">RFISchema</span></a></span><span> </span><span id="local-6989586621687993889"><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
</span><a href="#local-6989586621687993889"><span class="hs-identifier hs-var">remoteSchema</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-58"></span><span>        </span><span class="hs-comment">-- see Note [SchemaT and stacking]</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><span class="annottext">SchemaContext
-&gt; RemoteNullForwardingPolicy
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall (m :: * -&gt; *) a.
SchemaContext
-&gt; RemoteNullForwardingPolicy
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     a
-&gt; m a
</span><a href="Hasura.GraphQL.Schema.Common.html#runRemoteSchema"><span class="hs-identifier hs-var">runRemoteSchema</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687993747"><span class="hs-identifier hs-var">schemaContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaOptions -&gt; RemoteNullForwardingPolicy
</span><a href="Hasura.RQL.Types.Schema.Options.html#soRemoteNullForwardingPolicy"><span class="hs-identifier hs-var">soRemoteNullForwardingPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687993748"><span class="hs-identifier hs-var">schemaOptions</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-60"></span><span>          </span><span id="local-6989586621687993892"><span class="annot"><span class="annottext">Maybe
  (FieldParser
     n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)))
</span><a href="#local-6989586621687993892"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaMap
-&gt; RemoteSchemaPermissions
-&gt; HashMap FieldName lhsJoinField
-&gt; RemoteSchemaFieldInfo
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     (Maybe
        (FieldParser
           n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
forall r (m :: * -&gt; *) (n :: * -&gt; *) lhsJoinField.
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaMap
-&gt; RemoteSchemaPermissions
-&gt; HashMap FieldName lhsJoinField
-&gt; RemoteSchemaFieldInfo
-&gt; SchemaT
     r
     m
     (Maybe
        (FieldParser
           n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSchemaField"><span class="hs-identifier hs-var">remoteRelationshipToSchemaField</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaMap
</span><a href="#local-6989586621687993750"><span class="hs-identifier hs-var">remoteSchemaCache</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687993751"><span class="hs-identifier hs-var">remoteSchemaPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
</span><a href="#local-6989586621687993854"><span class="hs-identifier hs-var">_rfiLHS</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
</span><a href="#local-6989586621687993889"><span class="hs-identifier hs-var">remoteSchema</span></a></span><span>
</span><span id="line-61"></span><span>          </span><span class="annot"><span class="annottext">Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a.
a
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
 -&gt; SchemaT
      (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
       CustomizeRemoteFieldName)
      m
      (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]))
-&gt; Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser
   n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
 -&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; Maybe
     (FieldParser
        n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)))
-&gt; Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldParser n (RemoteRelationshipField UnpreparedValue)
-&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a. a -&gt; [a]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n (RemoteRelationshipField UnpreparedValue)
 -&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; (FieldParser
      n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
    -&gt; FieldParser n (RemoteRelationshipField UnpreparedValue))
-&gt; FieldParser
     n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
-&gt; [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)
 -&gt; RemoteRelationshipField UnpreparedValue)
-&gt; FieldParser
     n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
-&gt; FieldParser n (RemoteRelationshipField UnpreparedValue)
forall a b.
(a -&gt; b)
-&gt; FieldParser MetadataObjId n a -&gt; FieldParser MetadataObjId n b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)
-&gt; RemoteRelationshipField UnpreparedValue
forall (vf :: BackendType -&gt; *).
RemoteSchemaSelect (RemoteRelationshipField vf)
-&gt; RemoteRelationshipField vf
</span><a href="Hasura.RQL.IR.Root.html#RemoteSchemaField"><span class="hs-identifier hs-var">IR.RemoteSchemaField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe
  (FieldParser
     n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)))
</span><a href="#local-6989586621687993892"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="annot"><span class="hs-comment">-- | Parser(s) for remote relationship fields to a remote schema</span></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSchemaField"><span class="hs-identifier hs-type">remoteRelationshipToSchemaField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687993489"><span class="annot"><a href="#local-6989586621687993489"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687993490"><span class="annot"><a href="#local-6989586621687993490"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687993491"><span class="annot"><a href="#local-6989586621687993491"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621687993493"><span class="annot"><a href="#local-6989586621687993493"><span class="hs-identifier hs-type">lhsJoinField</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993489"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993490"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993491"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#RemoteSchemaMap"><span class="hs-identifier hs-type">RemoteSchemaMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#RemoteSchemaPermissions"><span class="hs-identifier hs-type">RemoteSchemaPermissions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.4.5/unordered-containers-0.2.19.1-fc2e0f1d37ef28cdf90ef4bc038ad0de1aaee4c64eb6ed4574eefbec08a983d1/share/doc/html/src/Data.HashMap.Internal.html#HashMap"><span class="hs-identifier hs-type">HashMap.HashMap</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993493"><span class="hs-identifier hs-type">lhsJoinField</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaFieldInfo"><span class="hs-identifier hs-type">RemoteSchemaFieldInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993489"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993490"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993491"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteSchemaSelect"><span class="hs-identifier hs-type">IR.RemoteSchemaSelect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span id="remoteRelationshipToSchemaField"><span class="annot"><span class="annottext">remoteRelationshipToSchemaField :: forall r (m :: * -&gt; *) (n :: * -&gt; *) lhsJoinField.
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaMap
-&gt; RemoteSchemaPermissions
-&gt; HashMap FieldName lhsJoinField
-&gt; RemoteSchemaFieldInfo
-&gt; SchemaT
     r
     m
     (Maybe
        (FieldParser
           n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSchemaField"><span class="hs-identifier hs-var hs-var">remoteRelationshipToSchemaField</span></a></span></span><span> </span><span id="local-6989586621687993986"><span class="annot"><span class="annottext">RemoteSchemaMap
</span><a href="#local-6989586621687993986"><span class="hs-identifier hs-var">remoteSchemaCache</span></a></span></span><span> </span><span id="local-6989586621687993987"><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687993987"><span class="hs-identifier hs-var">remoteSchemaPermissions</span></a></span></span><span> </span><span id="local-6989586621687993988"><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
</span><a href="#local-6989586621687993988"><span class="hs-identifier hs-var">lhsFields</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaFieldInfo"><span class="hs-identifier hs-type">RemoteSchemaFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687993990"><span id="local-6989586621687993991"><span id="local-6989586621687993992"><span id="local-6989586621687993993"><span id="local-6989586621687993994"><span id="local-6989586621687993995"><span id="local-6989586621687993996"><span class="annot"><span class="annottext">[TypeDefinition [Name] RemoteSchemaInputValueDefinition]
HashMap Name RemoteSchemaInputValueDefinition
RelName
RemoteSchemaName
RemoteFields
LHSIdentifier
RemoteSchemaInfo
_rrfiName :: RelName
_rrfiParamMap :: HashMap Name RemoteSchemaInputValueDefinition
_rrfiRemoteFields :: RemoteFields
_rrfiRemoteSchema :: RemoteSchemaInfo
_rrfiInputValueDefinitions :: [TypeDefinition [Name] RemoteSchemaInputValueDefinition]
_rrfiRemoteSchemaName :: RemoteSchemaName
_rrfiLHSIdentifier :: LHSIdentifier
_rrfiName :: RemoteSchemaFieldInfo -&gt; RelName
_rrfiParamMap :: RemoteSchemaFieldInfo
-&gt; HashMap Name RemoteSchemaInputValueDefinition
_rrfiRemoteFields :: RemoteSchemaFieldInfo -&gt; RemoteFields
_rrfiRemoteSchema :: RemoteSchemaFieldInfo -&gt; RemoteSchemaInfo
_rrfiInputValueDefinitions :: RemoteSchemaFieldInfo
-&gt; [TypeDefinition [Name] RemoteSchemaInputValueDefinition]
_rrfiRemoteSchemaName :: RemoteSchemaFieldInfo -&gt; RemoteSchemaName
_rrfiLHSIdentifier :: RemoteSchemaFieldInfo -&gt; LHSIdentifier
</span><a href="#local-6989586621687993990"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT
  (SchemaT r m)
  (FieldParser
     n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)))
-&gt; SchemaT
     r
     m
     (Maybe
        (FieldParser
           n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-73"></span><span>  </span><span id="local-6989586621687994005"><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687994005"><span class="hs-identifier hs-var">roleName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaContext -&gt; RoleName) -&gt; MaybeT (SchemaT r m) RoleName
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; RoleName
</span><a href="Hasura.GraphQL.Schema.Common.html#scRole"><span class="hs-identifier hs-var">scRole</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span id="local-6989586621687994008"><span class="annot"><span class="annottext">RemoteSchemaCtx
</span><a href="#local-6989586621687994008"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><span class="annottext">RemoteSchemaName -&gt; RemoteSchemaMap -&gt; Maybe RemoteSchemaCtx
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.4.5/unordered-containers-0.2.19.1-fc2e0f1d37ef28cdf90ef4bc038ad0de1aaee4c64eb6ed4574eefbec08a983d1/share/doc/html/src/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-var">HashMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaName
</span><a href="#local-6989586621687993995"><span class="hs-identifier hs-var">_rrfiRemoteSchemaName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaMap
</span><a href="#local-6989586621687993986"><span class="hs-identifier hs-var">remoteSchemaCache</span></a></span><span>
</span><span id="line-76"></span><span>      </span><span class="annot"><span class="annottext">Maybe RemoteSchemaCtx
-&gt; MaybeT (SchemaT r m) RemoteSchemaCtx
-&gt; MaybeT (SchemaT r m) RemoteSchemaCtx
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; MaybeT (SchemaT r m) RemoteSchemaCtx
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid remote schema name: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RemoteSchemaName -&gt; Text
forall t. ToTxt t =&gt; Text -&gt; t -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-var">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaName
</span><a href="#local-6989586621687993995"><span class="hs-identifier hs-var">_rrfiRemoteSchemaName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>  </span><span id="local-6989586621687994013"><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621687994013"><span class="hs-identifier hs-var">introspection</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe IntrospectionResult
-&gt; MaybeT (SchemaT r m) IntrospectionResult
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe IntrospectionResult
 -&gt; MaybeT (SchemaT r m) IntrospectionResult)
-&gt; Maybe IntrospectionResult
-&gt; MaybeT (SchemaT r m) IntrospectionResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaPermissions
-&gt; RoleName -&gt; RemoteSchemaCtx -&gt; Maybe IntrospectionResult
forall remoteFieldInfo.
RemoteSchemaPermissions
-&gt; RoleName
-&gt; RemoteSchemaCtxG remoteFieldInfo
-&gt; Maybe IntrospectionResult
</span><a href="Hasura.GraphQL.Schema.Common.html#getIntrospectionResult"><span class="hs-identifier hs-var">getIntrospectionResult</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687993987"><span class="hs-identifier hs-var">remoteSchemaPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687994005"><span class="hs-identifier hs-var">roleName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx
</span><a href="#local-6989586621687994008"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994016"><span class="annot"><span class="annottext">remoteSchemaRelationships :: RemoteSchemaRelationshipsG (RemoteFieldInfo Name)
</span><a href="#local-6989586621687994016"><span class="hs-identifier hs-var hs-var">remoteSchemaRelationships</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx
-&gt; RemoteSchemaRelationshipsG (RemoteFieldInfo Name)
forall remoteFieldInfo.
RemoteSchemaCtxG remoteFieldInfo
-&gt; RemoteSchemaRelationshipsG remoteFieldInfo
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rscRemoteRelationships"><span class="hs-identifier hs-var">_rscRemoteRelationships</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx
</span><a href="#local-6989586621687994008"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span><span>
</span><span id="line-79"></span><span>      </span><span id="local-6989586621687994018"><span class="annot"><span class="annottext">roleIntrospection :: RemoteSchemaIntrospection
</span><a href="#local-6989586621687994018"><span class="hs-identifier hs-var hs-var">roleIntrospection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntrospectionResult -&gt; RemoteSchemaIntrospection
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#irDoc"><span class="hs-identifier hs-var">irDoc</span></a></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621687994013"><span class="hs-identifier hs-var">introspection</span></a></span><span>
</span><span id="line-80"></span><span>      </span><span id="local-6989586621687994020"><span class="annot"><span class="annottext">remoteSchemaRoot :: Name
</span><a href="#local-6989586621687994020"><span class="hs-identifier hs-var hs-var">remoteSchemaRoot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntrospectionResult -&gt; Name
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#irQueryRoot"><span class="hs-identifier hs-var">irQueryRoot</span></a></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621687994013"><span class="hs-identifier hs-var">introspection</span></a></span><span>
</span><span id="line-81"></span><span>      </span><span id="local-6989586621687994022"><span class="annot"><span class="annottext">remoteSchemaCustomizer :: RemoteSchemaCustomizer
</span><a href="#local-6989586621687994022"><span class="hs-identifier hs-var hs-var">remoteSchemaCustomizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo -&gt; RemoteSchemaCustomizer
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#rsCustomizer"><span class="hs-identifier hs-var">rsCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">(RemoteSchemaInfo -&gt; RemoteSchemaCustomizer)
-&gt; RemoteSchemaInfo -&gt; RemoteSchemaCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx -&gt; RemoteSchemaInfo
forall remoteFieldInfo.
RemoteSchemaCtxG remoteFieldInfo -&gt; RemoteSchemaInfo
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rscInfo"><span class="hs-identifier hs-var">_rscInfo</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx
</span><a href="#local-6989586621687994008"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span><span>
</span><span id="line-82"></span><span>      </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span id="local-6989586621687994026"><span class="annot"><span class="annottext">HashMap
  Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621687994026"><span class="hs-identifier hs-var">typeDefns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994018"><span class="hs-identifier hs-var">roleIntrospection</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994027"><span class="annot"><span class="annottext">hasuraFieldNames :: HashSet FieldName
</span><a href="#local-6989586621687994027"><span class="hs-identifier hs-var hs-var">hasuraFieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField -&gt; HashSet FieldName
forall k a. HashMap k a -&gt; HashSet k
</span><a href="file:///root/.local/state/cabal/store/ghc-9.4.5/unordered-containers-0.2.19.1-fc2e0f1d37ef28cdf90ef4bc038ad0de1aaee4c64eb6ed4574eefbec08a983d1/share/doc/html/src/Data.HashSet.Internal.html#keysSet"><span class="hs-identifier hs-var">HashMap.keysSet</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
</span><a href="#local-6989586621687993988"><span class="hs-identifier hs-var">lhsFields</span></a></span><span>
</span><span id="line-84"></span><span>      </span><span id="local-6989586621687994029"><span class="annot"><span class="annottext">relationshipDef :: ToSchemaRelationshipDef
</span><a href="#local-6989586621687994029"><span class="hs-identifier hs-var hs-var">relationshipDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaName
-&gt; HashSet FieldName -&gt; RemoteFields -&gt; ToSchemaRelationshipDef
</span><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#ToSchemaRelationshipDef"><span class="hs-identifier hs-var">ToSchemaRelationshipDef</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaName
</span><a href="#local-6989586621687993995"><span class="hs-identifier hs-var">_rrfiRemoteSchemaName</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet FieldName
</span><a href="#local-6989586621687994027"><span class="hs-identifier hs-var">hasuraFieldNames</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFields
</span><a href="#local-6989586621687993992"><span class="hs-identifier hs-var">_rrfiRemoteFields</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621687994031"><span class="annot"><span class="annottext">[TypeDefinition [Name] RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621687994031"><span class="hs-identifier hs-var">newInpValDefns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#TypeDefinition"><span class="hs-identifier hs-type">G.TypeDefinition</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaInputValueDefinition"><span class="hs-identifier hs-type">RemoteSchemaInputValueDefinition</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span id="local-6989586621687994032"><span class="annot"><span class="annottext">HashMap Name RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621687994032"><span class="hs-identifier hs-var">remoteFieldParamMap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687994005"><span class="hs-identifier hs-var">roleName</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName -&gt; RoleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="Hasura.RQL.Types.Roles.html#adminRoleName"><span class="hs-identifier hs-var">adminRoleName</span></a></span><span>
</span><span id="line-87"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-88"></span><span>        </span><span class="hs-comment">-- we don't validate the remote relationship when the role is admin</span><span>
</span><span id="line-89"></span><span>        </span><span class="hs-comment">-- because it's already been validated, when the remote relationship</span><span>
</span><span id="line-90"></span><span>        </span><span class="hs-comment">-- was created</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><span class="annottext">([TypeDefinition [Name] RemoteSchemaInputValueDefinition],
 HashMap Name RemoteSchemaInputValueDefinition)
-&gt; MaybeT
     (SchemaT r m)
     ([TypeDefinition [Name] RemoteSchemaInputValueDefinition],
      HashMap Name RemoteSchemaInputValueDefinition)
forall a. a -&gt; MaybeT (SchemaT r m) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TypeDefinition [Name] RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621687993994"><span class="hs-identifier hs-var">_rrfiInputValueDefinitions</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HashMap Name RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621687993991"><span class="hs-identifier hs-var">_rrfiParamMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-93"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687994033"><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
</span><a href="#local-6989586621687994033"><span class="hs-identifier hs-var">roleRemoteField</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-94"></span><span>          </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a.
(Foldable t, Alternative f) =&gt;
t a -&gt; f a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html#afold"><span class="hs-identifier hs-var">afold</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>            </span><span class="annot"><span class="annottext">(Either
   ValidationError
   (HashMap FieldName lhsJoinField, RemoteSchemaFieldInfo)
 -&gt; MaybeT
      (SchemaT r m)
      (HashMap FieldName lhsJoinField, RemoteSchemaFieldInfo))
-&gt; Either
     ValidationError
     (HashMap FieldName lhsJoinField, RemoteSchemaFieldInfo)
-&gt; MaybeT
     (SchemaT r m)
     (HashMap FieldName lhsJoinField, RemoteSchemaFieldInfo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-96"></span><span>            </span><span class="hs-comment">-- TODO: this really needs to go way, we shouldn't be doing</span><span>
</span><span id="line-97"></span><span>            </span><span class="hs-comment">-- validation when building parsers</span><span>
</span><span id="line-98"></span><span>            </span><span class="annot"><span class="annottext">ToSchemaRelationshipDef
-&gt; LHSIdentifier
-&gt; RelName
-&gt; (RemoteSchemaInfo, IntrospectionResult)
-&gt; HashMap FieldName lhsJoinField
-&gt; Either
     ValidationError
     (HashMap FieldName lhsJoinField, RemoteSchemaFieldInfo)
forall (m :: * -&gt; *) joinField.
MonadError ValidationError m =&gt;
ToSchemaRelationshipDef
-&gt; LHSIdentifier
-&gt; RelName
-&gt; (RemoteSchemaInfo, IntrospectionResult)
-&gt; HashMap FieldName joinField
-&gt; m (HashMap FieldName joinField, RemoteSchemaFieldInfo)
</span><a href="Hasura.RemoteSchema.SchemaCache.RemoteRelationship.html#validateToSchemaRelationship"><span class="hs-identifier hs-var">validateToSchemaRelationship</span></a></span><span> </span><span class="annot"><span class="annottext">ToSchemaRelationshipDef
</span><a href="#local-6989586621687994029"><span class="hs-identifier hs-var">relationshipDef</span></a></span><span> </span><span class="annot"><span class="annottext">LHSIdentifier
</span><a href="#local-6989586621687993996"><span class="hs-identifier hs-var">_rrfiLHSIdentifier</span></a></span><span> </span><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687993990"><span class="hs-identifier hs-var">_rrfiName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621687993993"><span class="hs-identifier hs-var">_rrfiRemoteSchema</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621687994013"><span class="hs-identifier hs-var">introspection</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
</span><a href="#local-6989586621687993988"><span class="hs-identifier hs-var">lhsFields</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><span class="annottext">([TypeDefinition [Name] RemoteSchemaInputValueDefinition],
 HashMap Name RemoteSchemaInputValueDefinition)
-&gt; MaybeT
     (SchemaT r m)
     ([TypeDefinition [Name] RemoteSchemaInputValueDefinition],
      HashMap Name RemoteSchemaInputValueDefinition)
forall a. a -&gt; MaybeT (SchemaT r m) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
-&gt; [TypeDefinition [Name] RemoteSchemaInputValueDefinition]
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rrfiInputValueDefinitions"><span class="hs-identifier hs-var">Remote._rrfiInputValueDefinitions</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
</span><a href="#local-6989586621687994033"><span class="hs-identifier hs-var">roleRemoteField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
-&gt; HashMap Name RemoteSchemaInputValueDefinition
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rrfiParamMap"><span class="hs-identifier hs-var">Remote._rrfiParamMap</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
</span><a href="#local-6989586621687994033"><span class="hs-identifier hs-var">roleRemoteField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- add the new input value definitions created by the remote relationship</span><span>
</span><span id="line-101"></span><span>      </span><span class="hs-comment">-- to the existing schema introspection of the role</span><span>
</span><span id="line-102"></span><span>      </span><span id="local-6989586621687994036"><span class="annot"><span class="annottext">remoteRelationshipIntrospection :: RemoteSchemaIntrospection
</span><a href="#local-6989586621687994036"><span class="hs-identifier hs-var hs-var">remoteRelationshipIntrospection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap
  Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; RemoteSchemaIntrospection
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-var">RemoteSchemaIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap
   Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
 -&gt; RemoteSchemaIntrospection)
-&gt; HashMap
     Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; RemoteSchemaIntrospection
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap
  Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621687994026"><span class="hs-identifier hs-var">typeDefns</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap
  Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; HashMap
     Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; HashMap
     Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeDefinition [Name] RemoteSchemaInputValueDefinition -&gt; Name)
-&gt; [TypeDefinition [Name] RemoteSchemaInputValueDefinition]
-&gt; HashMap
     Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
forall k v. Hashable k =&gt; (v -&gt; k) -&gt; [v] -&gt; HashMap k v
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.HashMap.Strict.Extended.html#fromListOn"><span class="hs-identifier hs-var">HashMap.fromListOn</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition -&gt; Name
forall possibleTypes inputType.
TypeDefinition possibleTypes inputType -&gt; Name
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#getTypeName"><span class="hs-identifier hs-var">getTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeDefinition [Name] RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621687994031"><span class="hs-identifier hs-var">newInpValDefns</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span id="local-6989586621687994039"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994039"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; MaybeT (SchemaT r m) Name
forall (m :: * -&gt; *). MonadError QErr m =&gt; Text -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-var">textToName</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; MaybeT (SchemaT r m) Name)
-&gt; Text -&gt; MaybeT (SchemaT r m) Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelName -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-var">relNameToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687993990"><span class="hs-identifier hs-var">_rrfiName</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-comment">-- This selection set parser, should be of the remote node's selection set parser, which comes</span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-comment">-- from the fieldCall</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994041"><span class="annot"><span class="annottext">fieldCalls :: NonEmpty FieldCall
</span><a href="#local-6989586621687994041"><span class="hs-identifier hs-var hs-var">fieldCalls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteFields -&gt; NonEmpty FieldCall
</span><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#unRemoteFields"><span class="hs-identifier hs-var">unRemoteFields</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFields
</span><a href="#local-6989586621687993992"><span class="hs-identifier hs-var">_rrfiRemoteFields</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span id="local-6989586621687994043"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687994043"><span class="hs-identifier hs-var">nestedFieldType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SchemaT r m GType -&gt; MaybeT (SchemaT r m) GType
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; MaybeT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(SchemaT r m GType -&gt; MaybeT (SchemaT r m) GType)
-&gt; SchemaT r m GType -&gt; MaybeT (SchemaT r m) GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; RemoteSchemaIntrospection
-&gt; NonEmpty FieldCall
-&gt; SchemaT r m GType
forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name
-&gt; RemoteSchemaIntrospection
-&gt; NonEmpty FieldCall
-&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType"><span class="hs-identifier hs-var">lookupNestedFieldType</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994020"><span class="hs-identifier hs-var">remoteSchemaRoot</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994018"><span class="hs-identifier hs-var">roleIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687994041"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994045"><span class="annot"><span class="annottext">typeName :: Name
</span><a href="#local-6989586621687994045"><span class="hs-identifier hs-var hs-var">typeName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; Name
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#getBaseType"><span class="hs-identifier hs-var">G.getBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687994043"><span class="hs-identifier hs-var">nestedFieldType</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621687994047"><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621687994047"><span class="hs-identifier hs-var">fieldTypeDefinition</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; MaybeT
     (SchemaT r m)
     (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; MaybeT
     (SchemaT r m)
     (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#lookupType"><span class="hs-identifier hs-var">lookupType</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994018"><span class="hs-identifier hs-var">roleIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994045"><span class="hs-identifier hs-var">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>      </span><span class="hs-comment">-- the below case will never happen because we get the type name</span><span>
</span><span id="line-113"></span><span>      </span><span class="hs-comment">-- from the schema document itself i.e. if a field exists for the</span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-comment">-- given role, then it's return type also must exist</span><span>
</span><span id="line-115"></span><span>      </span><span class="annot"><span class="annottext">(MaybeT
   (SchemaT r m)
   (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
 -&gt; MaybeT
      (SchemaT r m)
      (TypeDefinition [Name] RemoteSchemaInputValueDefinition))
-&gt; MaybeT
     (SchemaT r m)
     (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; MaybeT
     (SchemaT r m)
     (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; MaybeT
     (SchemaT r m)
     (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="annot"><span class="annottext">(Text
 -&gt; MaybeT
      (SchemaT r m)
      (TypeDefinition [Name] RemoteSchemaInputValueDefinition))
-&gt; Text
-&gt; MaybeT
     (SchemaT r m)
     (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;unexpected: &quot;</span></span><span>
</span><span id="line-117"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994045"><span class="hs-identifier hs-var">typeName</span></a></span><span>
</span><span id="line-118"></span><span>      </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; not found &quot;</span></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-comment">-- These are the arguments that are given by the user while executing a query</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994050"><span class="annot"><span class="annottext">remoteFieldUserArguments :: [RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621687994050"><span class="hs-identifier hs-var hs-var">remoteFieldUserArguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, RemoteSchemaInputValueDefinition)
 -&gt; RemoteSchemaInputValueDefinition)
-&gt; [(Name, RemoteSchemaInputValueDefinition)]
-&gt; [RemoteSchemaInputValueDefinition]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, RemoteSchemaInputValueDefinition)
-&gt; RemoteSchemaInputValueDefinition
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">([(Name, RemoteSchemaInputValueDefinition)]
 -&gt; [RemoteSchemaInputValueDefinition])
-&gt; [(Name, RemoteSchemaInputValueDefinition)]
-&gt; [RemoteSchemaInputValueDefinition]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name RemoteSchemaInputValueDefinition
-&gt; [(Name, RemoteSchemaInputValueDefinition)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.4.5/unordered-containers-0.2.19.1-fc2e0f1d37ef28cdf90ef4bc038ad0de1aaee4c64eb6ed4574eefbec08a983d1/share/doc/html/src/Data.HashMap.Internal.html#toList"><span class="hs-identifier hs-var">HashMap.toList</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621687994032"><span class="hs-identifier hs-var">remoteFieldParamMap</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621687994053"><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (GraphQLField
     (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable)
</span><a href="#local-6989586621687994053"><span class="hs-identifier hs-var">remoteFld</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
-&gt; MaybeT
     (SchemaT r m)
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
-&gt; MaybeT
     (SchemaT r m)
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
forall (m :: * -&gt; *) r a.
(MonadReader r m, Has MkTypename r,
 Has CustomizeRemoteFieldName r) =&gt;
RemoteSchemaCustomizer -&gt; m a -&gt; m a
</span><a href="Hasura.GraphQL.Schema.Remote.html#withRemoteSchemaCustomization"><span class="hs-identifier hs-var">withRemoteSchemaCustomization</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621687994022"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span><span>
</span><span id="line-123"></span><span>      </span><span class="annot"><span class="annottext">(MaybeT
   (SchemaT r m)
   (FieldParser
      MetadataObjId
      n
      (GraphQLField
         (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
 -&gt; MaybeT
      (SchemaT r m)
      (FieldParser
         MetadataObjId
         n
         (GraphQLField
            (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable)))
-&gt; MaybeT
     (SchemaT r m)
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
-&gt; MaybeT
     (SchemaT r m)
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaT
  r
  m
  (FieldParser
     MetadataObjId
     n
     (GraphQLField
        (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
-&gt; MaybeT
     (SchemaT r m)
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; MaybeT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><span class="annottext">(SchemaT
   r
   m
   (FieldParser
      MetadataObjId
      n
      (GraphQLField
         (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
 -&gt; MaybeT
      (SchemaT r m)
      (FieldParser
         MetadataObjId
         n
         (GraphQLField
            (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable)))
-&gt; SchemaT
     r
     m
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
-&gt; MaybeT
     (SchemaT r m)
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GType
-&gt; FieldParser
     MetadataObjId
     n
     (GraphQLField
        (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable)
-&gt; FieldParser
     MetadataObjId
     n
     (GraphQLField
        (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable)
forall (m :: * -&gt; *) origin a.
GType -&gt; FieldParser origin m a -&gt; FieldParser origin m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Parser.html#wrapFieldParser"><span class="hs-identifier hs-var">P.wrapFieldParser</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687994043"><span class="hs-identifier hs-var">nestedFieldType</span></a></span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><span class="annottext">(FieldParser
   MetadataObjId
   n
   (GraphQLField
      (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable)
 -&gt; FieldParser
      MetadataObjId
      n
      (GraphQLField
         (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
-&gt; SchemaT
     r
     m
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
-&gt; SchemaT
     r
     m
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; RemoteSchemaRelationshipsG (RemoteFieldInfo Name)
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; TypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; SchemaT
     r
     m
     (FieldParser
        MetadataObjId
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaIntrospection
-&gt; RemoteSchemaRelationshipsG (RemoteFieldInfo Name)
-&gt; Name
-&gt; Name
-&gt; Maybe Description
-&gt; [RemoteSchemaInputValueDefinition]
-&gt; TypeDefinition [Name] RemoteSchemaInputValueDefinition
-&gt; SchemaT
     r
     m
     (FieldParser
        n
        (GraphQLField
           (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))
</span><a href="Hasura.GraphQL.Schema.Remote.html#remoteField"><span class="hs-identifier hs-var">remoteField</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994036"><span class="hs-identifier hs-var">remoteRelationshipIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaRelationshipsG (RemoteFieldInfo Name)
</span><a href="#local-6989586621687994016"><span class="hs-identifier hs-var">remoteSchemaRelationships</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994020"><span class="hs-identifier hs-var">remoteSchemaRoot</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994039"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621687994050"><span class="hs-identifier hs-var">remoteFieldUserArguments</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621687994047"><span class="hs-identifier hs-var">fieldTypeDefinition</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="annottext">FieldParser
  n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
-&gt; MaybeT
     (SchemaT r m)
     (FieldParser
        n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)))
forall a. a -&gt; MaybeT (SchemaT r m) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><span class="annottext">(FieldParser
   n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
 -&gt; MaybeT
      (SchemaT r m)
      (FieldParser
         n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
-&gt; FieldParser
     n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
-&gt; MaybeT
     (SchemaT r m)
     (FieldParser
        n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (GraphQLField
     (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable)
</span><a href="#local-6989586621687994053"><span class="hs-identifier hs-var">remoteFld</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (GraphQLField
     (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable)
-&gt; (GraphQLField
      (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
    -&gt; n (RemoteSchemaSelect
            (RemoteRelationshipField UnpreparedValue)))
-&gt; FieldParser
     n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
forall (m :: * -&gt; *) origin a b.
Monad m =&gt;
FieldParser origin m a -&gt; (a -&gt; m b) -&gt; FieldParser origin m b
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Parser.html#bindField"><span class="hs-operator hs-var">`P.bindField`</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687994058"><span class="annot"><span class="annottext">fld :: GraphQLField
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687994058"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#GraphQLField"><span class="hs-identifier hs-type">IR.GraphQLField</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_fArguments :: forall r var. GraphQLField r var -&gt; HashMap Name (Value var)
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_fArguments"><span class="hs-identifier hs-var">IR._fArguments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621687994061"><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621687994061"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_fSelectionSet :: forall r var. GraphQLField r var -&gt; SelectionSet r var
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_fSelectionSet"><span class="hs-identifier hs-var">IR._fSelectionSet</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621687994063"><span class="annot"><span class="annottext">SelectionSet
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687994063"><span class="hs-identifier hs-var">selSet</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_fName :: forall r var. GraphQLField r var -&gt; Name
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_fName"><span class="hs-identifier hs-var">IR._fName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621687994065"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994065"><span class="hs-identifier hs-var">fname</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-130"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994066"><span class="annot"><span class="annottext">remoteArgs :: [RemoteFieldArgument]
</span><a href="#local-6989586621687994066"><span class="hs-identifier hs-var hs-var">remoteArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-131"></span><span>            </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
-&gt; [(Name, Value RemoteSchemaVariable)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.4.5/unordered-containers-0.2.19.1-fc2e0f1d37ef28cdf90ef4bc038ad0de1aaee4c64eb6ed4574eefbec08a983d1/share/doc/html/src/Data.HashMap.Internal.html#toList"><span class="hs-identifier hs-var">HashMap.toList</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621687994061"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Value RemoteSchemaVariable)]
-&gt; ((Name, Value RemoteSchemaVariable) -&gt; RemoteFieldArgument)
-&gt; [RemoteFieldArgument]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621687994068"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994068"><span class="hs-identifier hs-var">argName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687994069"><span class="annot"><span class="annottext">Value RemoteSchemaVariable
</span><a href="#local-6989586621687994069"><span class="hs-identifier hs-var">argVal</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; InputValue RemoteSchemaVariable -&gt; RemoteFieldArgument
</span><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteFieldArgument"><span class="hs-identifier hs-var">IR.RemoteFieldArgument</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994068"><span class="hs-identifier hs-var">argName</span></a></span><span> </span><span class="annot"><span class="annottext">(InputValue RemoteSchemaVariable -&gt; RemoteFieldArgument)
-&gt; InputValue RemoteSchemaVariable -&gt; RemoteFieldArgument
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Value RemoteSchemaVariable -&gt; InputValue RemoteSchemaVariable
forall v. Value v -&gt; InputValue v
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Variable.html#GraphQLValue"><span class="hs-identifier hs-var">P.GraphQLValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value RemoteSchemaVariable
</span><a href="#local-6989586621687994069"><span class="hs-identifier hs-var">argVal</span></a></span><span>
</span><span id="line-132"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994072"><span class="annot"><span class="annottext">resultCustomizer :: ResultCustomizer
</span><a href="#local-6989586621687994072"><span class="hs-identifier hs-var hs-var">resultCustomizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-133"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty FieldCall -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="#local-6989586621687994073"><span class="hs-identifier hs-var">applyFieldCalls</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687994041"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span>
</span><span id="line-134"></span><span>              </span><span class="annot"><span class="annottext">(ResultCustomizer -&gt; ResultCustomizer)
-&gt; ResultCustomizer -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AliasMapping -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="Hasura.RQL.Types.ResultCustomization.html#applyAliasMapping"><span class="hs-identifier hs-var">applyAliasMapping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; AliasMapping
</span><a href="Hasura.RQL.Types.ResultCustomization.html#singletonAliasMapping"><span class="hs-identifier hs-var">singletonAliasMapping</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994065"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldCall -&gt; Name
</span><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#fcName"><span class="hs-identifier hs-var">fcName</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldCall -&gt; Name) -&gt; FieldCall -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall -&gt; FieldCall
forall a. NonEmpty a -&gt; a
</span><span class="hs-identifier hs-var">NE.last</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687994041"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>              </span><span class="annot"><span class="annottext">(ResultCustomizer -&gt; ResultCustomizer)
-&gt; ResultCustomizer -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
-&gt; GraphQLField
     (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
-&gt; ResultCustomizer
</span><a href="Hasura.GraphQL.Schema.Remote.html#makeResultCustomizer"><span class="hs-identifier hs-var">makeResultCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621687994022"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">GraphQLField
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687994058"><span class="hs-identifier hs-var">fld</span></a></span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><span class="annottext">RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)
-&gt; n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
forall a. a -&gt; n a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">(RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)
 -&gt; n (RemoteSchemaSelect
         (RemoteRelationshipField UnpreparedValue)))
-&gt; RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)
-&gt; n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteSchemaSelect"><span class="hs-identifier hs-type">IR.RemoteSchemaSelect</span></a></span><span>
</span><span id="line-138"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_rselArgs :: [RemoteFieldArgument]
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_rselArgs"><span class="hs-identifier hs-var">IR._rselArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[RemoteFieldArgument]
</span><a href="#local-6989586621687994066"><span class="hs-identifier hs-var">remoteArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>            </span><span class="annot"><span class="annottext">_rselResultCustomizer :: ResultCustomizer
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_rselResultCustomizer"><span class="hs-identifier hs-var">IR._rselResultCustomizer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ResultCustomizer
</span><a href="#local-6989586621687994072"><span class="hs-identifier hs-var">resultCustomizer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-140"></span><span>            </span><span class="annot"><span class="annottext">_rselSelection :: SelectionSet
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_rselSelection"><span class="hs-identifier hs-var">IR._rselSelection</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectionSet
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687994063"><span class="hs-identifier hs-var">selSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>            </span><span class="annot"><span class="annottext">_rselFieldCall :: NonEmpty FieldCall
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_rselFieldCall"><span class="hs-identifier hs-var">IR._rselFieldCall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687994041"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>            </span><span class="annot"><span class="annottext">_rselRemoteSchema :: RemoteSchemaInfo
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_rselRemoteSchema"><span class="hs-identifier hs-var">IR._rselRemoteSchema</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621687993993"><span class="hs-identifier hs-var">_rrfiRemoteSchema</span></a></span><span>
</span><span id="line-143"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-comment">-- Apply parent field calls so that the result customizer modifies the nested field</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="#local-6989586621687994073"><span class="hs-identifier hs-type">applyFieldCalls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html#ResultCustomizer"><span class="hs-identifier hs-type">ResultCustomizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html#ResultCustomizer"><span class="hs-identifier hs-type">ResultCustomizer</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span id="local-6989586621687994073"><span class="annot"><span class="annottext">applyFieldCalls :: NonEmpty FieldCall -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="#local-6989586621687994073"><span class="hs-identifier hs-var hs-var">applyFieldCalls</span></a></span></span><span> </span><span id="local-6989586621687994085"><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687994085"><span class="hs-identifier hs-var">fieldCalls</span></a></span></span><span> </span><span id="local-6989586621687994086"><span class="annot"><span class="annottext">ResultCustomizer
</span><a href="#local-6989586621687994086"><span class="hs-identifier hs-var">resultCustomizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>      </span><span class="annot"><span class="annottext">(FieldCall -&gt; ResultCustomizer -&gt; ResultCustomizer)
-&gt; ResultCustomizer -&gt; [FieldCall] -&gt; ResultCustomizer
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="Hasura.RQL.Types.ResultCustomization.html#modifyFieldByName"><span class="hs-identifier hs-var">modifyFieldByName</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; ResultCustomizer -&gt; ResultCustomizer)
-&gt; (FieldCall -&gt; Name)
-&gt; FieldCall
-&gt; ResultCustomizer
-&gt; ResultCustomizer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldCall -&gt; Name
</span><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#fcName"><span class="hs-identifier hs-var">fcName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ResultCustomizer
</span><a href="#local-6989586621687994086"><span class="hs-identifier hs-var">resultCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">([FieldCall] -&gt; ResultCustomizer)
-&gt; [FieldCall] -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall -&gt; [FieldCall]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.init</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687994085"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span id="local-6989586621687993623"><span id="local-6989586621687993624"><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType%27"><span class="hs-identifier hs-type">lookupNestedFieldType'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier hs-type">MonadMemoize</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993623"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993623"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-152"></span><span>  </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993624"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993623"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#GType"><span class="hs-identifier hs-type">G.GType</span></a></span></span></span><span>
</span><span id="line-156"></span><span id="lookupNestedFieldType%27"><span class="annot"><span class="annottext">lookupNestedFieldType' :: forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name -&gt; RemoteSchemaIntrospection -&gt; FieldCall -&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType%27"><span class="hs-identifier hs-var hs-var">lookupNestedFieldType'</span></a></span></span><span> </span><span id="local-6989586621687994109"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994109"><span class="hs-identifier hs-var">parentTypeName</span></a></span></span><span> </span><span id="local-6989586621687994110"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994110"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span> </span><span id="local-6989586621687994112"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994112"><span class="hs-identifier hs-var">fcName</span></a></span></span><span> </span><span class="annot"><span class="annottext">RemoteArguments
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#lookupObject"><span class="hs-identifier hs-var">lookupObject</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994110"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994109"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-158"></span><span>    </span><span class="annot"><span class="annottext">Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; SchemaT r m GType
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; SchemaT r m GType) -&gt; Text -&gt; SchemaT r m GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994109"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; not found&quot;</span></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#ObjectTypeDefinition"><span class="hs-identifier hs-type">G.ObjectTypeDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687994117"><span id="local-6989586621687994118"><span id="local-6989586621687994119"><span id="local-6989586621687994120"><span id="local-6989586621687994121"><span class="annot"><span class="annottext">[Name]
[FieldDefinition RemoteSchemaInputValueDefinition]
[Directive Void]
Maybe Description
Name
_otdDescription :: Maybe Description
_otdName :: Name
_otdImplementsInterfaces :: [Name]
_otdDirectives :: [Directive Void]
_otdFieldsDefinition :: [FieldDefinition RemoteSchemaInputValueDefinition]
_otdDescription :: forall inputType.
ObjectTypeDefinition inputType -&gt; Maybe Description
_otdName :: forall inputType. ObjectTypeDefinition inputType -&gt; Name
_otdImplementsInterfaces :: forall inputType. ObjectTypeDefinition inputType -&gt; [Name]
_otdDirectives :: forall inputType.
ObjectTypeDefinition inputType -&gt; [Directive Void]
_otdFieldsDefinition :: forall inputType.
ObjectTypeDefinition inputType -&gt; [FieldDefinition inputType]
</span><a href="#local-6989586621687994117"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-160"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition -&gt; Bool)
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><span class="hs-identifier hs-var">find</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994112"><span class="hs-identifier hs-var">fcName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool)
-&gt; (FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name)
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#_fldName"><span class="hs-identifier hs-var">G._fldName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621687994121"><span class="hs-identifier hs-var">_otdFieldsDefinition</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><span class="annottext">Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; SchemaT r m GType
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; SchemaT r m GType) -&gt; Text -&gt; SchemaT r m GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;field with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994112"><span class="hs-identifier hs-var">fcName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; not found&quot;</span></span><span>
</span><span id="line-162"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#FieldDefinition"><span class="hs-identifier hs-type">G.FieldDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687994130"><span id="local-6989586621687994131"><span id="local-6989586621687994132"><span id="local-6989586621687994133"><span id="local-6989586621687994134"><span class="annot"><span class="annottext">[Directive Void]
[RemoteSchemaInputValueDefinition]
Maybe Description
Name
GType
_fldName :: forall inputType. FieldDefinition inputType -&gt; Name
_fldDescription :: Maybe Description
_fldName :: Name
_fldArgumentsDefinition :: [RemoteSchemaInputValueDefinition]
_fldType :: GType
_fldDirectives :: [Directive Void]
_fldDescription :: forall inputType. FieldDefinition inputType -&gt; Maybe Description
_fldArgumentsDefinition :: forall inputType.
FieldDefinition inputType -&gt; ArgumentsDefinition inputType
_fldType :: forall inputType. FieldDefinition inputType -&gt; GType
_fldDirectives :: forall inputType. FieldDefinition inputType -&gt; [Directive Void]
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#_fldName"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GType -&gt; SchemaT r m GType
forall a. a -&gt; SchemaT r m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687994133"><span class="hs-identifier hs-var">_fldType</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span id="local-6989586621687993577"><span id="local-6989586621687993578"><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType"><span class="hs-identifier hs-type">lookupNestedFieldType</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier hs-type">MonadMemoize</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993577"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993577"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993578"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993577"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#GType"><span class="hs-identifier hs-type">G.GType</span></a></span></span></span><span>
</span><span id="line-170"></span><span id="lookupNestedFieldType"><span class="annot"><span class="annottext">lookupNestedFieldType :: forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name
-&gt; RemoteSchemaIntrospection
-&gt; NonEmpty FieldCall
-&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType"><span class="hs-identifier hs-var hs-var">lookupNestedFieldType</span></a></span></span><span> </span><span id="local-6989586621687994149"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994149"><span class="hs-identifier hs-var">parentTypeName</span></a></span></span><span> </span><span id="local-6989586621687994150"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994150"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687994151"><span class="annot"><span class="annottext">FieldCall
</span><a href="#local-6989586621687994151"><span class="hs-identifier hs-var">fieldCall</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621687994152"><span class="annot"><span class="annottext">[FieldCall]
</span><a href="#local-6989586621687994152"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>  </span><span id="local-6989586621687994153"><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687994153"><span class="hs-identifier hs-var">fieldType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RemoteSchemaIntrospection -&gt; FieldCall -&gt; SchemaT r m GType
forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name -&gt; RemoteSchemaIntrospection -&gt; FieldCall -&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType%27"><span class="hs-identifier hs-var">lookupNestedFieldType'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994149"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994150"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">FieldCall
</span><a href="#local-6989586621687994151"><span class="hs-identifier hs-var">fieldCall</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[FieldCall] -&gt; Maybe (NonEmpty FieldCall)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NE.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">[FieldCall]
</span><a href="#local-6989586621687994152"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">Maybe (NonEmpty FieldCall)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GType -&gt; SchemaT r m GType
forall a. a -&gt; SchemaT r m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687994153"><span class="hs-identifier hs-var">fieldType</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687994155"><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687994155"><span class="hs-identifier hs-var">rest'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-175"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; RemoteSchemaIntrospection
-&gt; NonEmpty FieldCall
-&gt; SchemaT r m GType
forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name
-&gt; RemoteSchemaIntrospection
-&gt; NonEmpty FieldCall
-&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType"><span class="hs-identifier hs-var">lookupNestedFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GType -&gt; Name
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html#getBaseType"><span class="hs-identifier hs-var">G.getBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687994153"><span class="hs-identifier hs-var">fieldType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687994150"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687994155"><span class="hs-identifier hs-var">rest'</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">-- | Parser(s) for remote relationship fields to a database table.</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- Note that when the target is a database table, an array relationship</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- declaration would have the '_aggregate' field in addition to the array</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- relationship field, hence [FieldParser ...] instead of 'FieldParser'</span><span>
</span><span id="line-181"></span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSourceField"><span class="hs-identifier hs-type">remoteRelationshipToSourceField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687993466"><span class="annot"><a href="#local-6989586621687993466"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687993467"><span class="annot"><a href="#local-6989586621687993467"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621687993468"><span class="annot"><a href="#local-6989586621687993468"><span class="hs-identifier hs-type">tgt</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993466"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier hs-type">P.MonadMemoize</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993466"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Class.html#MonadParse"><span class="hs-identifier hs-type">P.MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993467"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendSchema"><span class="hs-identifier hs-type">BackendSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993468"><span class="hs-identifier hs-type">tgt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993468"><span class="hs-identifier hs-type">tgt</span></a></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceCache"><span class="hs-identifier hs-type">SourceCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.ToSource.html#RemoteSourceFieldInfo"><span class="hs-identifier hs-type">RemoteSourceFieldInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993468"><span class="hs-identifier hs-type">tgt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="#local-6989586621687993466"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993467"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#RemoteSourceSelect"><span class="hs-identifier hs-type">IR.RemoteSourceSelect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687993468"><span class="hs-identifier hs-type">tgt</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-194"></span><span id="remoteRelationshipToSourceField"><span class="annot"><span class="annottext">remoteRelationshipToSourceField :: forall (m :: * -&gt; *) (n :: * -&gt; *) (tgt :: BackendType).
(MonadError QErr m, MonadMemoize m, MonadParse n,
 BackendSchema tgt, BackendTableSelectSchema tgt) =&gt;
SchemaContext
-&gt; SchemaOptions
-&gt; SourceCache
-&gt; RemoteSourceFieldInfo tgt
-&gt; m [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSourceField"><span class="hs-identifier hs-var hs-var">remoteRelationshipToSourceField</span></a></span></span><span> </span><span id="local-6989586621687994221"><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687994221"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621687994222"><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687994222"><span class="hs-identifier hs-var">options</span></a></span></span><span> </span><span id="local-6989586621687994223"><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687994223"><span class="hs-identifier hs-var">sourceCache</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.ToSource.html#RemoteSourceFieldInfo"><span class="hs-identifier hs-type">RemoteSourceFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687994225"><span id="local-6989586621687994226"><span id="local-6989586621687994227"><span id="local-6989586621687994228"><span id="local-6989586621687994229"><span id="local-6989586621687994230"><span class="annot"><span class="annottext">HashMap FieldName (ScalarType tgt, Column tgt)
SourceName
RelType
RelName
SourceConfig tgt
TableName tgt
_rsfiName :: RelName
_rsfiType :: RelType
_rsfiSource :: SourceName
_rsfiSourceConfig :: SourceConfig tgt
_rsfiTable :: TableName tgt
_rsfiMapping :: HashMap FieldName (ScalarType tgt, Column tgt)
_rsfiName :: forall (tgt :: BackendType). RemoteSourceFieldInfo tgt -&gt; RelName
_rsfiType :: forall (tgt :: BackendType). RemoteSourceFieldInfo tgt -&gt; RelType
_rsfiSource :: forall (tgt :: BackendType).
RemoteSourceFieldInfo tgt -&gt; SourceName
_rsfiSourceConfig :: forall (tgt :: BackendType).
RemoteSourceFieldInfo tgt -&gt; SourceConfig tgt
_rsfiTable :: forall (tgt :: BackendType).
RemoteSourceFieldInfo tgt -&gt; TableName tgt
_rsfiMapping :: forall (tgt :: BackendType).
RemoteSourceFieldInfo tgt
-&gt; HashMap FieldName (ScalarType tgt, Column tgt)
</span><a href="#local-6989586621687994225"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-195"></span><span>  </span><span id="local-6989586621687994237"><span class="annot"><span class="annottext">SourceInfo tgt
</span><a href="#local-6989586621687994237"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><span class="annottext">Maybe (SourceInfo tgt) -&gt; m (SourceInfo tgt) -&gt; m (SourceInfo tgt)
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (b :: BackendType).
HasTag b =&gt;
BackendSourceInfo -&gt; Maybe (SourceInfo b)
</span><a href="Hasura.RQL.Types.Source.html#unsafeSourceInfo"><span class="hs-identifier hs-var">unsafeSourceInfo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687993468"><span class="hs-identifier hs-type">tgt</span></a></span><span> </span><span class="annot"><span class="annottext">(BackendSourceInfo -&gt; Maybe (SourceInfo tgt))
-&gt; Maybe BackendSourceInfo -&gt; Maybe (SourceInfo tgt)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; SourceCache -&gt; Maybe BackendSourceInfo
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.4.5/unordered-containers-0.2.19.1-fc2e0f1d37ef28cdf90ef4bc038ad0de1aaee4c64eb6ed4574eefbec08a983d1/share/doc/html/src/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-var">HashMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621687994227"><span class="hs-identifier hs-var">_rsfiSource</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687994223"><span class="hs-identifier hs-var">sourceCache</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>      </span><span class="annot"><span class="annottext">(m (SourceInfo tgt) -&gt; m (SourceInfo tgt))
-&gt; m (SourceInfo tgt) -&gt; m (SourceInfo tgt)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; m (SourceInfo tgt)
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="annot"><span class="annottext">(Text -&gt; m (SourceInfo tgt)) -&gt; Text -&gt; m (SourceInfo tgt)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;source not found &quot;</span></span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621687994227"><span class="hs-identifier hs-var">_rsfiSource</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><span class="annottext">SchemaContext
-&gt; SchemaOptions
-&gt; SourceInfo tgt
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
-&gt; m [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
forall (b :: BackendType) (m :: * -&gt; *) a.
SchemaContext
-&gt; SchemaOptions
-&gt; SourceInfo b
-&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo b) m a
-&gt; m a
</span><a href="Hasura.GraphQL.Schema.Common.html#runSourceSchema"><span class="hs-identifier hs-var">runSourceSchema</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687994221"><span class="hs-identifier hs-var">context</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687994222"><span class="hs-identifier hs-var">options</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo tgt
</span><a href="#local-6989586621687994237"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994242"><span class="annot"><span class="annottext">roleName :: RoleName
</span><a href="#local-6989586621687994242"><span class="hs-identifier hs-var hs-var">roleName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; RoleName
</span><a href="Hasura.GraphQL.Schema.Common.html#scRole"><span class="hs-identifier hs-var">scRole</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687994221"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span id="local-6989586621687994243"><span class="annot"><span class="annottext">tCase :: NamingCase
</span><a href="#local-6989586621687994243"><span class="hs-identifier hs-var hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ResolvedSourceCustomization -&gt; NamingCase
</span><a href="Hasura.RQL.Types.SourceCustomization.html#_rscNamingConvention"><span class="hs-identifier hs-var">_rscNamingConvention</span></a></span><span> </span><span class="annot"><span class="annottext">(ResolvedSourceCustomization -&gt; NamingCase)
-&gt; ResolvedSourceCustomization -&gt; NamingCase
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo tgt -&gt; ResolvedSourceCustomization
forall (b :: BackendType).
SourceInfo b -&gt; ResolvedSourceCustomization
</span><a href="Hasura.RQL.Types.Source.html#_siCustomization"><span class="hs-identifier hs-var">_siCustomization</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo tgt
</span><a href="#local-6989586621687994237"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span id="local-6989586621687994246"><span class="annot"><span class="annottext">TableInfo tgt
</span><a href="#local-6989586621687994246"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableName tgt
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt) m (TableInfo tgt)
forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadError QErr m, MonadReader r m,
 Has (SourceInfo b) r) =&gt;
TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Schema.Common.html#askTableInfo"><span class="hs-identifier hs-var">askTableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableName tgt
</span><a href="#local-6989586621687994229"><span class="hs-identifier hs-var">_rsfiTable</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span id="local-6989586621687994248"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994248"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo tgt) m Name
forall (m :: * -&gt; *). MonadError QErr m =&gt; Text -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-var">textToName</span></a></span><span> </span><span class="annot"><span class="annottext">(Text
 -&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo tgt) m Name)
-&gt; Text
-&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo tgt) m Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelName -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-var">relNameToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687994225"><span class="hs-identifier hs-var">_rsfiName</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall (b :: BackendType).
RoleName -&gt; TableInfo b -&gt; Maybe (SelPermInfo b)
</span><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-var">tableSelectPermissions</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687993468"><span class="hs-identifier hs-type">tgt</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687994242"><span class="hs-identifier hs-var">roleName</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
</span><a href="#local-6989586621687994246"><span class="hs-identifier hs-var">tableInfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-206"></span><span>      </span><span class="annot"><span class="annottext">Maybe (SelPermInfo tgt)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[FieldParser
   n
   (RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
forall a.
a -&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo tgt) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-207"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687994250"><span class="annot"><span class="annottext">SelPermInfo tgt
</span><a href="#local-6989586621687994250"><span class="hs-identifier hs-var">tablePerms</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>        </span><span id="local-6989586621687994251"><span class="annot"><span class="annottext">[FieldParser
   MetadataObjId
   n
   (SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
</span><a href="#local-6989586621687994251"><span class="hs-identifier hs-var">parsers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RelType
</span><a href="#local-6989586621687994226"><span class="hs-identifier hs-var">_rsfiType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-209"></span><span>          </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ObjRel"><span class="hs-identifier hs-var">ObjRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-210"></span><span>            </span><span id="local-6989586621687994253"><span class="annot"><span class="annottext">Maybe (Parser 'Output n (AnnotatedFields tgt))
</span><a href="#local-6989586621687994253"><span class="hs-identifier hs-var">selectionSetParserM</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     (Maybe (Parser 'Output n (AnnotatedFields tgt)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSourceSchema tgt r m n =&gt;
TableInfo tgt
-&gt; SchemaT r m (Maybe (Parser 'Output n (AnnotatedFields tgt)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSourceSchema b r m n) =&gt;
TableInfo b
-&gt; SchemaT r m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
</span><a href="#local-6989586621687994246"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-211"></span><span>            </span><span class="annot"><span class="annottext">[FieldParser
   MetadataObjId
   n
   (SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        MetadataObjId
        n
        (SourceRelationshipSelection
           tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a.
a -&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo tgt) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">([FieldParser
    MetadataObjId
    n
    (SourceRelationshipSelection
       tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
 -&gt; SchemaT
      (SchemaContext, SchemaOptions, SourceInfo tgt)
      m
      [FieldParser
         MetadataObjId
         n
         (SourceRelationshipSelection
            tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)])
-&gt; [FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        MetadataObjId
        n
        (SourceRelationshipSelection
           tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Parser 'Output n (AnnotatedFields tgt))
</span><a href="#local-6989586621687994253"><span class="hs-identifier hs-var">selectionSetParserM</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-212"></span><span>              </span><span class="annot"><span class="annottext">Maybe (Parser 'Output n (AnnotatedFields tgt))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-213"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687994255"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields tgt)
</span><a href="#local-6989586621687994255"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-214"></span><span>                </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; [FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a. a -&gt; [a]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-215"></span><span>                  </span><span class="annot"><span class="annottext">(FieldParser
   MetadataObjId
   n
   (SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
 -&gt; [FieldParser
       MetadataObjId
       n
       (SourceRelationshipSelection
          tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)])
-&gt; FieldParser
     MetadataObjId
     n
     (SourceRelationshipSelection
        tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; [FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AnnotatedFields tgt)
-&gt; FieldParser MetadataObjId n (AnnotatedFields tgt)
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994248"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields tgt)
</span><a href="#local-6989586621687994255"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-216"></span><span>                  </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n (AnnotatedFields tgt)
-&gt; (AnnotatedFields tgt
    -&gt; SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; FieldParser
     MetadataObjId
     n
     (SourceRelationshipSelection
        tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687994257"><span class="annot"><span class="annottext">AnnotatedFields tgt
</span><a href="#local-6989586621687994257"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-217"></span><span>                    </span><span class="annot"><span class="annottext">AnnObjectSelectG
  tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
-&gt; SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
forall (b :: BackendType) r (vf :: BackendType -&gt; *).
AnnObjectSelectG b r (vf b) -&gt; SourceRelationshipSelection b r vf
</span><a href="Hasura.RQL.IR.Select.html#SourceRelationshipObject"><span class="hs-identifier hs-var">IR.SourceRelationshipObject</span></a></span><span>
</span><span id="line-218"></span><span>                      </span><span class="annot"><span class="annottext">(AnnObjectSelectG
   tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
 -&gt; SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; AnnObjectSelectG
     tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
-&gt; SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedFields tgt
-&gt; SelectFromG tgt (UnpreparedValue tgt)
-&gt; AnnBoolExp tgt (UnpreparedValue tgt)
-&gt; AnnObjectSelectG
     tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
forall (b :: BackendType) r v.
AnnFieldsG b r v
-&gt; SelectFromG b v -&gt; AnnBoolExp b v -&gt; AnnObjectSelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#AnnObjectSelectG"><span class="hs-identifier hs-var">IR.AnnObjectSelectG</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedFields tgt
</span><a href="#local-6989586621687994257"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableName tgt -&gt; SelectFromG tgt (UnpreparedValue tgt)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.From.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName tgt
</span><a href="#local-6989586621687994229"><span class="hs-identifier hs-var">_rsfiTable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>                      </span><span class="annot"><span class="annottext">(AnnBoolExp tgt (UnpreparedValue tgt)
 -&gt; AnnObjectSelectG
      tgt
      (RemoteRelationshipField UnpreparedValue)
      (UnpreparedValue tgt))
-&gt; AnnBoolExp tgt (UnpreparedValue tgt)
-&gt; AnnObjectSelectG
     tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TablePermG tgt (UnpreparedValue tgt)
-&gt; AnnBoolExp tgt (UnpreparedValue tgt)
forall (b :: BackendType) v. TablePermG b v -&gt; AnnBoolExp b v
</span><a href="Hasura.RQL.IR.Select.TablePerm.html#%24sel%3A_tpFilter%3ATablePerm"><span class="hs-identifier hs-var">IR._tpFilter</span></a></span><span>
</span><span id="line-220"></span><span>                      </span><span class="annot"><span class="annottext">(TablePermG tgt (UnpreparedValue tgt)
 -&gt; AnnBoolExp tgt (UnpreparedValue tgt))
-&gt; TablePermG tgt (UnpreparedValue tgt)
-&gt; AnnBoolExp tgt (UnpreparedValue tgt)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo tgt -&gt; TablePermG tgt (UnpreparedValue tgt)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Common.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo tgt
</span><a href="#local-6989586621687994250"><span class="hs-identifier hs-var">tablePerms</span></a></span><span>
</span><span id="line-221"></span><span>          </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ArrRel"><span class="hs-identifier hs-var">ArrRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-222"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687994264"><span class="annot"><span class="annottext">aggFieldName :: Name
</span><a href="#local-6989586621687994264"><span class="hs-identifier hs-var hs-var">aggFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; GQLNameIdentifier -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#applyFieldNameCaseIdentifier"><span class="hs-identifier hs-var">applyFieldNameCaseIdentifier</span></a></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621687994243"><span class="hs-identifier hs-var">tCase</span></a></span><span> </span><span class="annot"><span class="annottext">(GQLNameIdentifier -&gt; Name) -&gt; GQLNameIdentifier -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name, [NameSuffix]) -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html#fromAutogeneratedTuple"><span class="hs-identifier hs-var">C.fromAutogeneratedTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994248"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; NameSuffix
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.4.5/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html#convertNameToSuffix"><span class="hs-identifier hs-var">G.convertNameToSuffix</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_aggregate"><span class="hs-identifier hs-var">Name._aggregate</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>            </span><span id="local-6989586621687994269"><span class="annot"><span class="annottext">Maybe (FieldParser n (SelectExp tgt))
</span><a href="#local-6989586621687994269"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     (Maybe (FieldParser n (SelectExp tgt)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSourceSchema tgt r m n =&gt;
TableInfo tgt
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT r m (Maybe (FieldParser n (SelectExp tgt)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSourceSchema b r m n) =&gt;
TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT r m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#selectTable"><span class="hs-identifier hs-var">selectTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
</span><a href="#local-6989586621687994246"><span class="hs-identifier hs-var">tableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994248"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-224"></span><span>            </span><span id="local-6989586621687994271"><span class="annot"><span class="annottext">Maybe (FieldParser n (AggSelectExp tgt))
</span><a href="#local-6989586621687994271"><span class="hs-identifier hs-var">aggSelectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     (Maybe (FieldParser n (AggSelectExp tgt)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSourceSchema tgt r m n =&gt;
TableInfo tgt
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT r m (Maybe (FieldParser n (AggSelectExp tgt)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSourceSchema b r m n) =&gt;
TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT r m (Maybe (FieldParser n (AggSelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#selectTableAggregate"><span class="hs-identifier hs-var">selectTableAggregate</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
</span><a href="#local-6989586621687994246"><span class="hs-identifier hs-var">tableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687994264"><span class="hs-identifier hs-var">aggFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-225"></span><span>            </span><span class="annot"><span class="annottext">[FieldParser
   MetadataObjId
   n
   (SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        MetadataObjId
        n
        (SourceRelationshipSelection
           tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a.
a -&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo tgt) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-226"></span><span>              </span><span class="annot"><span class="annottext">([FieldParser
    MetadataObjId
    n
    (SourceRelationshipSelection
       tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
 -&gt; SchemaT
      (SchemaContext, SchemaOptions, SourceInfo tgt)
      m
      [FieldParser
         MetadataObjId
         n
         (SourceRelationshipSelection
            tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)])
-&gt; [FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        MetadataObjId
        n
        (SourceRelationshipSelection
           tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Maybe
   (FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue))]
-&gt; [FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a. [Maybe a] -&gt; [a]
forall (f :: * -&gt; *) a. Filterable f =&gt; f (Maybe a) -&gt; f a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.4.5/witherable-0.4.2-c348fd1be527fbb040281c624d4766fb2c04c7e7f3be298bbe123b3357fb1136/share/doc/html/src/Witherable.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span>
</span><span id="line-227"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Maybe (FieldParser n (SelectExp tgt))
</span><a href="#local-6989586621687994269"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldParser n (SelectExp tgt))
-&gt; (FieldParser n (SelectExp tgt)
    -&gt; FieldParser
         MetadataObjId
         n
         (SourceRelationshipSelection
            tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
-&gt; Maybe
     (FieldParser
        MetadataObjId
        n
        (SourceRelationshipSelection
           tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(SelectExp tgt
 -&gt; SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; FieldParser n (SelectExp tgt)
-&gt; FieldParser
     MetadataObjId
     n
     (SourceRelationshipSelection
        tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
forall a b.
(a -&gt; b)
-&gt; FieldParser MetadataObjId n a -&gt; FieldParser MetadataObjId n b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">SelectExp tgt
-&gt; SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
forall (b :: BackendType) r (vf :: BackendType -&gt; *).
AnnSimpleSelectG b r (vf b) -&gt; SourceRelationshipSelection b r vf
</span><a href="Hasura.RQL.IR.Select.html#SourceRelationshipArray"><span class="hs-identifier hs-var">IR.SourceRelationshipArray</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-228"></span><span>                  </span><span class="annot"><span class="annottext">Maybe (FieldParser n (AggSelectExp tgt))
</span><a href="#local-6989586621687994271"><span class="hs-identifier hs-var">aggSelectionSetParser</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (FieldParser n (AggSelectExp tgt))
-&gt; (FieldParser n (AggSelectExp tgt)
    -&gt; FieldParser
         MetadataObjId
         n
         (SourceRelationshipSelection
            tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
-&gt; Maybe
     (FieldParser
        MetadataObjId
        n
        (SourceRelationshipSelection
           tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(AggSelectExp tgt
 -&gt; SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; FieldParser n (AggSelectExp tgt)
-&gt; FieldParser
     MetadataObjId
     n
     (SourceRelationshipSelection
        tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
forall a b.
(a -&gt; b)
-&gt; FieldParser MetadataObjId n a -&gt; FieldParser MetadataObjId n b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">AggSelectExp tgt
-&gt; SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
forall (b :: BackendType) r (vf :: BackendType -&gt; *).
AnnAggregateSelectG b r (vf b)
-&gt; SourceRelationshipSelection b r vf
</span><a href="Hasura.RQL.IR.Select.html#SourceRelationshipArrayAggregate"><span class="hs-identifier hs-var">IR.SourceRelationshipArrayAggregate</span></a></span><span>
</span><span id="line-229"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-230"></span><span>        </span><span class="annot"><span class="annottext">[FieldParser
   n
   (RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
forall a.
a -&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo tgt) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-231"></span><span>          </span><span class="annot"><span class="annottext">([FieldParser
    n
    (RemoteSourceSelect
       (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
 -&gt; SchemaT
      (SchemaContext, SchemaOptions, SourceInfo tgt)
      m
      [FieldParser
         n
         (RemoteSourceSelect
            (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)])
-&gt; [FieldParser
      n
      (RemoteSourceSelect
         (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[FieldParser
   MetadataObjId
   n
   (SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
</span><a href="#local-6989586621687994251"><span class="hs-identifier hs-var">parsers</span></a></span><span>
</span><span id="line-232"></span><span>          </span><span class="annot"><span class="annottext">[FieldParser
   MetadataObjId
   n
   (SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
-&gt; (FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
    -&gt; FieldParser
         n
         (RemoteSourceSelect
            (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt))
-&gt; [FieldParser
      n
      (RemoteSourceSelect
         (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(SourceRelationshipSelection
   tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
 -&gt; RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)
-&gt; FieldParser
     MetadataObjId
     n
     (SourceRelationshipSelection
        tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; FieldParser
     n
     (RemoteSourceSelect
        (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)
forall a b.
(a -&gt; b)
-&gt; FieldParser MetadataObjId n a -&gt; FieldParser MetadataObjId n b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687994276"><span class="annot"><span class="annottext">SourceRelationshipSelection
  tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
</span><a href="#local-6989586621687994276"><span class="hs-identifier hs-var">select</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-233"></span><span>            </span><span class="annot"><span class="annottext">SourceName
-&gt; SourceConfig tgt
-&gt; SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
-&gt; HashMap FieldName (ScalarType tgt, Column tgt)
-&gt; StringifyNumbers
-&gt; RemoteSourceSelect
     (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt
forall r (vf :: BackendType -&gt; *) (tgt :: BackendType).
SourceName
-&gt; SourceConfig tgt
-&gt; SourceRelationshipSelection tgt r vf
-&gt; HashMap FieldName (ScalarType tgt, Column tgt)
-&gt; StringifyNumbers
-&gt; RemoteSourceSelect r vf tgt
</span><a href="Hasura.RQL.IR.Select.html#RemoteSourceSelect"><span class="hs-identifier hs-var">IR.RemoteSourceSelect</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621687994227"><span class="hs-identifier hs-var">_rsfiSource</span></a></span><span> </span><span class="annot"><span class="annottext">SourceConfig tgt
</span><a href="#local-6989586621687994228"><span class="hs-identifier hs-var">_rsfiSourceConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRelationshipSelection
  tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
</span><a href="#local-6989586621687994276"><span class="hs-identifier hs-var">select</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (ScalarType tgt, Column tgt)
</span><a href="#local-6989586621687994230"><span class="hs-identifier hs-var">_rsfiMapping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaOptions -&gt; StringifyNumbers
</span><a href="Hasura.RQL.Types.Schema.Options.html#soStringifyNumbers"><span class="hs-identifier hs-var">soStringifyNumbers</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687994222"><span class="hs-identifier hs-var">options</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span></pre></body></html>